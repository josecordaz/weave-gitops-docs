<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-RD8E3F9BEH","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Weave GitOps" href="/opensearch.xml"><title data-react-helmet="true">Managing existing clusters | Weave GitOps</title><meta data-react-helmet="true" property="og:url" content="https://docs.gitops.weave.works//docs/next/cluster-management/managing-existing-clusters"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Managing existing clusters | Weave GitOps"><meta data-react-helmet="true" name="description" content="{frontMatter.title}"><meta data-react-helmet="true" property="og:description" content="{frontMatter.title}"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon_150px.png"><link data-react-helmet="true" rel="canonical" href="https://docs.gitops.weave.works//docs/next/cluster-management/managing-existing-clusters"><link data-react-helmet="true" rel="alternate" href="https://docs.gitops.weave.works//docs/next/cluster-management/managing-existing-clusters" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.gitops.weave.works//docs/next/cluster-management/managing-existing-clusters" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.2f0d4c62.css">
<link rel="preload" href="/assets/js/runtime~main.2f354b03.js" as="script">
<link rel="preload" href="/assets/js/main.a33819a7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Weave GitOps</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/intro">Introduction</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/installation">Installation</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/getting-started">Getting Started</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/aws-marketplace">AWS Marketplace</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/docs/next/intro">main</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/cluster-management/managing-existing-clusters">main</a></li><li><a class="dropdown__link" href="/docs/cluster-management/managing-existing-clusters">0.3.3</a></li><li><a class="dropdown__link" href="/docs/0.3.1/cluster-management/managing-existing-clusters">0.3.1</a></li><li><a class="dropdown__link" href="/docs/0.3.0/cluster-management/managing-existing-clusters">0.3.0</a></li><li><a class="dropdown__link" href="/docs/0.2.5/intro">0.2.5</a></li><li><a class="dropdown__link" href="/docs/0.2.4/intro">0.2.4</a></li><li><a class="dropdown__link" href="/docs/0.2.2/intro">0.2.2</a></li><li><a class="dropdown__link" href="/docs/0.2.1/intro">0.2.1</a></li><li><a class="dropdown__link" href="/docs/0.2.0/intro">0.2.0</a></li><li><a class="dropdown__link" href="/docs/0.0.5/intro">0.0.5</a></li></ul></div><a href="https://github.com/weaveworks/weave-gitops" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Weave GitOps</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/next/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/next/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/next/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/next/aws-marketplace">AWS Marketplace</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/next/cluster-management/managing-existing-clusters">main</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/cluster-management/managing-existing-clusters">0.3.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.3.1/cluster-management/managing-existing-clusters">0.3.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.3.0/cluster-management/managing-existing-clusters">0.3.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.2.5/intro">0.2.5</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.2.4/intro">0.2.4</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.2.2/intro">0.2.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.2.1/intro">0.2.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.2.0/intro">0.2.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.0.5/intro">0.0.5</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/weaveworks/weave-gitops" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/installation">Installing the CLI</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/architecture">Architecture</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops-dashboard">GitOps Dashboard</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/troubleshooting">Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/aws-marketplace">AWS Marketplace</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/examples/sock-shop">Deploying the Sock Shop Application</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops-automation">GitOps Automation Configuration</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Cluster management</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cluster-management/intro">Introduction</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/next/cluster-management/managing-existing-clusters">Managing existing clusters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cluster-management/cluster-api-providers">Cluster API Providers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cluster-management/templates">CAPI Templates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cluster-management/provider-identities">CAPI Provider Identities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cluster-management/deleting-a-cluster">Deleting a Cluster</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">CLI Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cluster-management/cli/cli-clusters">Clusters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cluster-management/cli/cli-templates">Templates</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Enterprise</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/enterprise/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/enterprise/upgrading">Upgrading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/enterprise/configuration">Configuration</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops">gitops</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_add">gitops_add</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_add_cluster">gitops_add_cluster</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_app">gitops_app</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_app_add">gitops_app_add</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_app_list">gitops_app_list</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_app_pause">gitops_app_pause</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_app_remove">gitops_app_remove</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_app_status">gitops_app_status</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_app_unpause">gitops_app_unpause</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_beta">gitops_beta</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_beta_add">gitops_beta_add</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_beta_add_app">gitops_beta_add_app</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_beta_init">gitops_beta_init</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_beta_install">gitops_beta_install</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_delete">gitops_delete</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_delete_cluster">gitops_delete_cluster</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_flux">gitops_flux</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_flux_status">gitops_flux_status</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_get">gitops_get</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_get_cluster">gitops_get_cluster</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_get_credential">gitops_get_credential</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_get_template">gitops_get_template</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_install">gitops_install</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_ui">gitops_ui</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_ui_run">gitops_ui_run</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_uninstall">gitops_uninstall</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_upgrade">gitops_upgrade</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops_version">gitops_version</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Weave GitOps <b>main</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/cluster-management/managing-existing-clusters">latest version</a></b> (0.3.3).</div></div><div class="docItemContainer_33ec"><article><span class="badge badge--secondary">Version: main</span><div class="markdown"><header><h1 class="h1Heading_27L5">Managing existing clusters <a title="This feature is a available on enterprise" style="font-size:16px;margin-left:4px;font-variant:all-small-caps" href="/docs/next/enterprise/intro">enterprise</a></h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-connect-a-cluster"></a>How to: Connect a cluster<a class="hash-link" href="#how-to-connect-a-cluster" title="Direct link to heading">#</a></h2><p>To connect a cluster to Weave Gitops, first navigate to the <code>Clusters</code> section of the UI and click on the <code>Connect a cluster</code> button. You will then be presented with a form to add the details of the leaf cluster being connected.</p><ul><li>Name: this is the name of the leaf cluster. This is a required field.</li><li>Ingress URL: this is the publicly accessible HTTP(S) endpoint of the leaf cluster. This is an optional field.</li></ul><p>Click on the <code>Save &amp; next</code> button to persist these details. You will then be presented with a <code>kubectl</code> command that you can run to install an agent on your leaf cluster. The agent is responsible for inspecting the leaf cluster and sending back leaf information to the Weave Gitops server. It will not make any changes to your cluster.</p><p>Ensure that your current kubeconfig context is setup to use the leaf cluster. Then copy the command and run it.</p><p>After a few seconds, the status of your cluster should change to <code>Connected (Ready)</code> which indicates that the leaf cluster has been successfully connected.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-update-a-cluster"></a>How to: Update a cluster<a class="hash-link" href="#how-to-update-a-cluster" title="Direct link to heading">#</a></h2><p>To update a cluster, click on the rightmost icon of that cluster&#x27;s row. You will be presented with a form that allows you to update its name and ingress URL. Finally click on the <code>Save &amp; next</code> button to persist these changes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-disconnect-and-remove-a-cluster"></a>How to: Disconnect and remove a cluster<a class="hash-link" href="#how-to-disconnect-and-remove-a-cluster" title="Direct link to heading">#</a></h2><p>To disconnect a cluster open the config dialog with the ðŸ›  button on the cluster&#x27;s row.</p><p>The <em>Disconnect</em> tab shows instructions on how to remove the wkp-agent from your leaf cluster.</p><p>Once the agent has been removed its status will change from &quot;Connected&quot; to <em>Last seen</em>. Click <em>Remove cluster from the management cluster</em> to remove the cluster and the meta-data that&#x27;s been collected.</p><p>To re-connect the cluster again follow the <em>Connect a cluster</em> instructions above.</p><p><img alt="Disconnect cluster" src="/assets/images/disconnect-cluster-fa4a34617b18ae909507952f5f586848.png"></p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/weaveworks/weave-gitops-docs/edit/main/docs/cluster-management/managing-existing-clusters.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/cluster-management/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/cluster-management/cluster-api-providers"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cluster API Providers Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-connect-a-cluster" class="table-of-contents__link">How to: Connect a cluster</a></li><li><a href="#how-to-update-a-cluster" class="table-of-contents__link">How to: Update a cluster</a></li><li><a href="#how-to-disconnect-and-remove-a-cluster" class="table-of-contents__link">How to: Disconnect and remove a cluster</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items"><li class="footer__item"><a href="mailto:support@weave.works" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Weaveworks</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2f354b03.js"></script>
<script src="/assets/js/main.a33819a7.js"></script>
</body>
</html>